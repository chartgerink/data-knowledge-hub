"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8021],{7226:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>p,contentTitle:()=>c,default:()=>x,frontMatter:()=>d,metadata:()=>h,toc:()=>u});var n=i(4848),s=i(8453),r=i(2127),o=i(8936),a=i(4107),l=i(1822);const d={title:"X (Twitter) API"},c="Example: X (Twitter) API",h={id:"data-collection/03_00_code-samples/twitter/twitter-api",title:"X (Twitter) API",description:"<AuthorCard",source:"@site/docs/03_data-collection/03_00_code-samples/twitter/twitter-api.mdx",sourceDirName:"03_data-collection/03_00_code-samples/twitter",slug:"/data-collection/03_00_code-samples/twitter/twitter-api",permalink:"/data-knowledge-hub/docs/data-collection/03_00_code-samples/twitter/twitter-api",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{title:"X (Twitter) API"},sidebar:"docs",previous:{title:"Streaming Data",permalink:"/data-knowledge-hub/docs/data-collection/03_00_code-samples/twitter/streaming-database"},next:{title:"Twitter Rules",permalink:"/data-knowledge-hub/docs/data-collection/03_00_code-samples/twitter/twitter-rules"}},p={},u=[{value:"How to access data via the Twitter API v2",id:"how-to-access-data-via-the-twitter-api-v2",level:2},{value:"1. Prerequisites",id:"1-prerequisites",level:2},{value:"1.1. Software &amp; Tools",id:"11-software--tools",level:3},{value:"1.2 Twitter Credentials",id:"12-twitter-credentials",level:3},{value:"2. Installation",id:"2-installation",level:2},{value:"3. Basic Usage",id:"3-basic-usage",level:2},{value:"3.1 Authentication",id:"31-authentication",level:3},{value:"3.2 First example",id:"32-first-example",level:3},{value:"4. Available Endpoints",id:"4-available-endpoints",level:2},{value:"4.1 Data Model",id:"41-data-model",level:3},{value:"4.2 Tweets Endpoints",id:"42-tweets-endpoints",level:3},{value:"Filtered Stream Endpoint",id:"filtered-stream-endpoint",level:4},{value:"Full-archive Search Endpoint",id:"full-archive-search-endpoint",level:4},{value:"Quote Tweets Lookup Endpoint",id:"quote-tweets-lookup-endpoint",level:4},{value:"Recent Search Endpoint",id:"recent-search-endpoint",level:4},{value:"Retweeted By Endpoint",id:"retweeted-by-endpoint",level:4},{value:"Tweets Endpoint",id:"tweets-endpoint",level:4},{value:"4.3 Users Endpoints",id:"43-users-endpoints",level:3},{value:"Followers Lookup Endpoint",id:"followers-lookup-endpoint",level:4},{value:"User Lookup Endpoint",id:"user-lookup-endpoint",level:4},{value:"4.4 Compliance Endpoints",id:"44-compliance-endpoints",level:3},{value:"Compliance Event Stream",id:"compliance-event-stream",level:4},{value:"Batch Compliance Mode",id:"batch-compliance-mode",level:4}];function w(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"example-x-twitter-api",children:"Example: X (Twitter) API"})}),"\n","\n",(0,n.jsx)(o.A,{level:"Beginner"}),"\n",(0,n.jsx)(a.A,{platform:"Websites"}),"\n",(0,n.jsx)(l.A,{lang:"R"}),"\n",(0,n.jsx)(r.A,{name:"Andreas Neumeier",avatar:"AN",avatarSrc:i(3117).A,position:"SPARTA | University of the German Federal Armed Forces",website:"https://www.unibw.de/politikwissenschaft/professuren/lehrstuhl-invr/andreas_neumeier",linkedin:"https://www.linkedin.com/in/andreas-neumeier/"}),"\n",(0,n.jsx)(r.A,{name:"Jasmin Riedl",avatar:"JR",avatarSrc:i(1511).A,position:"SPARTA | University of the German Federal Armed Forces",twitter:"https://twitter.com/RiedlJasmin",website:"https://www.unibw.de/jasmin.riedl"}),"\n",(0,n.jsx)(r.A,{name:"Wiebke Drews",avatar:"WD",avatarSrc:i(5786).A,position:"SPARTA | University of the German Federal Armed Forces",twitter:"https://twitter.com/wiebkedrews",website:"www.wiebkedrews.com"}),"\n",(0,n.jsx)(t.h2,{id:"how-to-access-data-via-the-twitter-api-v2",children:"How to access data via the Twitter API v2"}),"\n",(0,n.jsxs)(t.p,{children:["Developers can access a wide range of X (Twitter) data, including Tweets, users, and more features with the Twitter API v2. The API provides vast opportunities, whether to gather insights, build a new application, or improve an existing one. Version 2 of the Twitter API offers a more flexible and scalable approach to accessing Twitter data, and the ",(0,n.jsx)(t.a,{href:"https://github.com/UnibwSparta/twitterapi",children:"Python implementation"})," aims to simplify this process for Python developers. Documentation for the Python package is available at ",(0,n.jsx)(t.a,{href:"https://unibwsparta.github.io/twitterapi/index.html",children:"https://unibwsparta.github.io/twitterapi/index.html"}),"."]}),"\n",(0,n.jsx)(t.h2,{id:"1-prerequisites",children:"1. Prerequisites"}),"\n",(0,n.jsx)(t.h3,{id:"11-software--tools",children:"1.1. Software & Tools"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Python (3.8 or higher)"}),"\n",(0,n.jsx)(t.li,{children:"Pip (Python package installer)"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"12-twitter-credentials",children:"1.2 Twitter Credentials"}),"\n",(0,n.jsx)(t.p,{children:"To use the Twitter API, you must have a developer account on Twitter, where you'll obtain the Bearer Token."}),"\n",(0,n.jsx)(t.h2,{id:"2-installation",children:"2. Installation"}),"\n",(0,n.jsx)(t.p,{children:"Install the required Python package using pip:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"pip3 install sparta-twitterapi\n"})}),"\n",(0,n.jsx)(t.h2,{id:"3-basic-usage",children:"3. Basic Usage"}),"\n",(0,n.jsx)(t.h3,{id:"31-authentication",children:"3.1 Authentication"}),"\n",(0,n.jsxs)(t.p,{children:["Authentication is required before making any requests to the API. The library reads the Bearer Token from an environment variable named ",(0,n.jsx)(t.code,{children:"BEARER_TOKEN"}),". You can set the environment variable directly or through the ",(0,n.jsx)(t.code,{children:"os"})," library in the Python code before the imports."]}),"\n",(0,n.jsx)(t.p,{children:"Set the environment variable in bash:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:'export BEARER_TOKEN="xxxxxxxxxxx"\n'})}),"\n",(0,n.jsx)(t.p,{children:"Set the environment variable in python:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:'import os\nos.environ["BEARER_TOKEN"] = "xxxxxxxxxxx"\n'})}),"\n",(0,n.jsx)(t.h3,{id:"32-first-example",children:"3.2 First example"}),"\n",(0,n.jsx)(t.p,{children:"This script retrieves two tweets defined by the tweet ID and outputs their content on the console."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:"import os\nos.environ[\"BEARER_TOKEN\"] = \"XXXXXXXXXXXXXX\"\nfrom sparta.twitterapi.tweets.tweets import get_tweets_by_id\n\nasync for tweet_response in get_tweets_by_id(['1511275800758300675', '1546866845180887040']):\n    print(tweet_response.tweet)\n"})}),"\n",(0,n.jsx)(t.h2,{id:"4-available-endpoints",children:"4. Available Endpoints"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.code,{children:"sparta-twitterapi"})," package provides several endpoints organized into three core categories: These consist of ",(0,n.jsx)(t.strong,{children:"Compliance, Users, and Tweets"}),". It also offers a data model for obtaining tweets that is resistant to API changes. Here\u2019s a comprehensive overview. For further details, refer to the official ",(0,n.jsx)(t.a,{href:"https://unibwsparta.github.io/twitterapi/",children:"documentation"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"41-data-model",children:"4.1 Data Model"}),"\n",(0,n.jsxs)(t.p,{children:["To account for differences between X\u2019s (Twitter\u2019s) API description and its actual responses, we devised a ",(0,n.jsx)(t.strong,{children:"Pydantic model"})," to represent tweet responses as the original classes provided by X (Twitter) couldn\u2019t be used. Every tweet includes two attributes. ",(0,n.jsx)(t.code,{children:"tweet_response.tweet"})," comprises the original tweet object, including details about the tweet, such as its id, creation date, text, entities, and more. The extension objects linked with the tweet, such as retweeted tweets, quoted tweets, users, media, polls, and places, are included in ",(0,n.jsx)(t.code,{children:"tweets_response.include"}),"s. Find all tweet attributes and their corresponding descriptions ",(0,n.jsx)(t.a,{href:"https://developer.twitter.com/en/docs/twitter-api/data-dictionary/object-model/tweet",children:"here"}),"."]}),"\n",(0,n.jsx)(t.h3,{id:"42-tweets-endpoints",children:"4.2 Tweets Endpoints"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.strong,{children:"twitterapi package"}),' provides various endpoints in the "Tweets" category that serve different functions and requirements associated with Twitter posts. Developers can utilize these endpoints related to Tweets to obtain comprehensive tools for harnessing, analyzing, and managing the vast amount of information flowing through Twitter every moment.']}),"\n",(0,n.jsxs)(t.p,{children:["In the endpoints provided by the Python library, all available ",(0,n.jsx)(t.a,{href:"https://developer.twitter.com/en/docs/twitter-api/fields",children:"fields"})," and ",(0,n.jsx)(t.a,{href:"https://developer.twitter.com/en/docs/twitter-api/expansions",children:"extensions"})," are retrieved by default. For comprehensive details, parameter explanations, and best practices, you should refer to the official ",(0,n.jsx)(t.code,{children:"sparta-twitterapi"})," package ",(0,n.jsx)(t.a,{href:"https://unibwsparta.github.io/twitterapi/",children:"documentation"}),". Here is a thorough outline of the endpoints that are available in this category:"]}),"\n",(0,n.jsx)(t.h4,{id:"filtered-stream-endpoint",children:"Filtered Stream Endpoint"}),"\n",(0,n.jsx)(t.p,{children:"The filtered stream endpoint group is designed for developers who wish to modify the public tweets' real-time stream based on specific criteria. This endpoint group allows users to follow real-time conversations on specific topics or events and observe trend development. This group includes several endpoints allowing:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Creating and managing rules. Apply a set of rules to filter real-time tweets and return only the tweets that fulfill the criteria."}),"\n",(0,n.jsx)(t.li,{children:"Connect to the filtered stream."}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"full-archive-search-endpoint",children:"Full-archive Search Endpoint"}),"\n",(0,n.jsx)(t.p,{children:"The full-archive search endpoint is available exclusively to projects with Academic Research or Enterprise access. It provides the capability to:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Access all public Tweets from the archive, starting with the very first Tweet in March 2006."}),"\n",(0,n.jsx)(t.li,{children:"Retrieve them based on specific search queries."}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"quote-tweets-lookup-endpoint",children:"Quote Tweets Lookup Endpoint"}),"\n",(0,n.jsx)(t.p,{children:"Retrieving Quote Tweets that are linked to a specific Tweet ID. This allows developers and researchers to quickly extract the entire conversation related to a certain Tweet, along with all its Quote Tweets, which promotes a thorough comprehension of the discussions."}),"\n",(0,n.jsx)(t.h4,{id:"recent-search-endpoint",children:"Recent Search Endpoint"}),"\n",(0,n.jsx)(t.p,{children:"The recent search endpoint provides access to:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Filtered public tweets posted in the last week."}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"retweeted-by-endpoint",children:"Retweeted By Endpoint"}),"\n",(0,n.jsx)(t.p,{children:"Users can utilize the Retweets lookup endpoint to:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Obtain a list of accounts that retweeted a specific Tweet."}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"tweets-endpoint",children:"Tweets Endpoint"}),"\n",(0,n.jsx)(t.p,{children:"This set of endpoints is designed to be simple, offering methods to:"}),"\n",(0,n.jsx)(t.p,{children:"Retrieve either a single Tweet or a group of Tweets identified by a Tweet ID.\nDespite the simplicity of this endpoint, it's essential for various tasks, such as retrieving updated Tweet details, checking a Tweet's availability, reviewing its edit history, and managing compliance events."}),"\n",(0,n.jsx)(t.h3,{id:"43-users-endpoints",children:"4.3 Users Endpoints"}),"\n",(0,n.jsxs)(t.p,{children:["The ",(0,n.jsx)(t.strong,{children:"twitterapi package"})," provides various endpoints under the 'Users' category. These endpoints are designed to offer insights and data about Twitter users. Below is a detailed breakdown of the available endpoints in this category:"]}),"\n",(0,n.jsx)(t.h4,{id:"followers-lookup-endpoint",children:"Followers Lookup Endpoint"}),"\n",(0,n.jsx)(t.p,{children:"The Followers Lookup Endpoint is designed to unravel and analyze the relationships between Twitter users. This process is commonly referred to as network analysis. There are two primary endpoints in this category:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"get_following_by_id"}),": This endpoint returns user objects that represent the users that a specific user is following. It provides a list of users whom the queried user has chosen to follow."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"get_followers_by_id"}),": On the other hand, this endpoint returns user objects that represent the users who follow the specified user. It gives a list of users who follow the queried user."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"Both of these endpoints provide valuable insights into the connection dynamics of specific accounts by shedding light on user relationships."}),"\n",(0,n.jsx)(t.h4,{id:"user-lookup-endpoint",children:"User Lookup Endpoint"}),"\n",(0,n.jsxs)(t.p,{children:["The User Lookup Endpoint is a service that retrieves details of one or more users based on either a user ID (",(0,n.jsx)(t.code,{children:"get_users_by_ids"}),") or username (",(0,n.jsx)(t.code,{children:"get_users_by_username"}),"). This endpoint uses the GET method to return the following:"]}),"\n",(0,n.jsxs)(t.p,{children:["User Details: The response typically includes user objects that contain fields such as follower count, location, pinned Tweet ID, and profile bio, among others. These fields provide a comprehensive view of the user's public profile and preferences. Find all user\nattributes and their corresponding descriptions ",(0,n.jsx)(t.a,{href:"https://developer.twitter.com/en/docs/twitter-api/data-dictionary/object-model/user",children:"here"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Developers, who seek to gain insights into user behavior, relationships, and characteristics on Twitter, will find these Users endpoints particularly useful. Consult the official ",(0,n.jsx)(t.a,{href:"https://unibwsparta.github.io/twitterapi/modules/users.user.html",children:"documentation"})," of the twitterapi package to gain a more detailed comprehension and explore other preferences and criteria."]}),"\n",(0,n.jsx)(t.h3,{id:"44-compliance-endpoints",children:"4.4 Compliance Endpoints"}),"\n",(0,n.jsxs)(t.p,{children:["For ensuring compliance with events, developers, who store X (Twitter) data offline, must reflect the real-time state and user intent on X (Twitter). This involves updating the data whenever users delete or edit their tweets, protect their accounts, or make other changes. There are ",(0,n.jsx)(t.strong,{children:"two methods"})," to perform this task:"]}),"\n",(0,n.jsx)(t.h4,{id:"compliance-event-stream",children:"Compliance Event Stream"}),"\n",(0,n.jsx)(t.p,{children:"The Compliance Event Stream provides real-time updates on any compliance-related events, ensuring that any stored data is kept in sync with the live state on X (Twitter)."}),"\n",(0,n.jsx)(t.h4,{id:"batch-compliance-mode",children:"Batch Compliance Mode"}),"\n",(0,n.jsxs)(t.p,{children:["Batch compliance endpoints are valuable for developers managing extensive datasets. By uploading sizable collections of Tweet or user IDs, you can quickly determine the compliance status of each entry. Identifying data that requires action ensures the compliance of your datasets. It is important to note that the batch compliance endpoints are specifically designed for their intended purposes. ",(0,n.jsx)(t.strong,{children:"Any use of these endpoints outside of their intended purposes is strictly prohibited"})," and could result in enforcement actions taken by X (Twitter)."]})]})}function x(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(w,{...e})}):w(e)}},2127:(e,t,i)=>{i.d(t,{A:()=>s});i(6540);var n=i(4848);const s=e=>{let{name:t,avatar:i,avatarSrc:s,position:r,website:o,twitter:a,scholar:l,mastodon:d,linkedin:c}=e;return(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",color:"#000",backgroundColor:"#fff",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:[(0,n.jsx)("div",{style:{width:"2px",height:"50px",backgroundColor:"#000",marginRight:"10px"}}),(0,n.jsxs)("div",{style:{color:"#fff",padding:"2px",display:s?"none":"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#2C60AD",borderRadius:"100%",width:"50px",height:"50px",fontWeight:"600"},children:[" ",i]}),(0,n.jsx)("img",{style:{verticalAlign:"middle",width:"50px",height:"50px",borderRadius:"50%",display:s?"":"none"},src:s}),(0,n.jsxs)("div",{style:{paddingLeft:"10px"},children:[(0,n.jsx)("div",{style:{fontWeight:"bold"},children:t}),(0,n.jsx)("div",{style:{fontSize:"14px"},children:r||"Author"}),(0,n.jsxs)("div",{style:{fontSize:"14px"},children:[(0,n.jsx)("a",{style:{display:o?"inline":"none"},href:o,target:"_blank",children:"Website "}),(0,n.jsx)("a",{style:{display:a?"inline":"none"},href:a,target:"_blank",children:"Twitter / X "}),(0,n.jsx)("a",{style:{display:d?"inline":"none"},href:d,target:"_blank",children:"Mastodon "}),(0,n.jsx)("a",{style:{display:l?"inline":"none"},href:l,target:"_blank",children:"Google Scholar "}),(0,n.jsx)("a",{style:{display:c?"inline":"none"},href:c,target:"_blank",children:"LinkedIn "})]})]})]})}},1822:(e,t,i)=>{i.d(t,{A:()=>s});i(6540);var n=i(4848);const s=e=>{let{lang:t}=e;return(0,n.jsxs)("div",{style:{display:"inline-block",backgroundColor:"#6EC2F9",color:"black",borderRadius:"25px",paddingTop:"5px",paddingBottom:"5px",paddingLeft:"15px",paddingRight:"15px",fontSize:"14px",fontWeight:"600",margin:"5px"},children:["Language: ",t]})}},8936:(e,t,i)=>{i.d(t,{A:()=>s});i(6540);var n=i(4848);const s=e=>{let{level:t}=e;return(0,n.jsxs)("div",{style:{display:"inline-block",backgroundColor:"black",color:"#fff",borderRadius:"25px",paddingTop:"5px",paddingBottom:"5px",paddingLeft:"15px",paddingRight:"15px",fontSize:"14px",fontWeight:"600",margin:"5px"},children:["Level required: ",t]})}},4107:(e,t,i)=>{i.d(t,{A:()=>s});i(6540);var n=i(4848);const s=e=>{let{platform:t}=e;return(0,n.jsxs)("div",{style:{display:"inline-block",backgroundColor:"#2C60AD",color:"#fff",borderRadius:"25px",paddingTop:"5px",paddingBottom:"5px",paddingLeft:"15px",paddingRight:"15px",fontSize:"14px",fontWeight:"600",margin:"5px"},children:["Platform: ",t]})}},5786:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/drews-31bfa0c2f8398c9c3df021b6e71a2160.png"},3117:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/neumeier-33cb8b56c17da611d83509ab42108097.png"},1511:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/riedl-492ce365faadac4650b2f1843719c2d7.png"},8453:(e,t,i)=>{i.d(t,{R:()=>o,x:()=>a});var n=i(6540);const s={},r=n.createContext(s);function o(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);